
<nb-card>
    <nb-card-header>Project: {{(currentProject | async)?.name}}</nb-card-header>
    <nb-card-body>
        <table id="projectEnvironmentsTable" equalColumnsWidth>
            <thead>
                <tr>
                    <th>Environments</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let workspaceId of workspaceList" class="environmentRow">
                    <td (click)="onWorkspaceClick(workspaceId)" *ngIf="workspaces.get(workspaceId) | async">{{(workspaces.get(workspaceId) | async).data.attributes.environment}}</td>
                </tr>
            </tbody>
        </table>
    </nb-card-body>
</nb-card>


<nb-card>
    <nb-card-header>VCS Assignment</nb-card-header>
    <nb-card-body>
        <!-- Check if connected to VCS repo -->
        <div *ngIf="projectDetails && projectDetails.data.attributes['vcs-repo-identifier']; else vcsNotAttached">
            Connected to: {{projectDetails["vcs-repo-identifier"]}}
        </div>
        <!-- If not, display connection to VCS -->
        <ng-template #vcsNotAttached>
            <!-- If there are oauth clients available, display connection options -->
            <div *ngIf="organisationOauthClients; else noOauthClients">

                <div>Connect VCS Repo</div>
                <br />
                <div *ngFor="let oauthClient of organisationOauthClients">
                    <button (click)="onOauthClientSelect(oauthClient)" nbButton>{{oauthClient.attributes.name}}</button>
                </div>
            </div>

            <ng-template #noOauthClients>
                There are no VCS providers registered, goto <a href="/{{(currentOrganisation | async).name}}/vcs-providers">VCS Providers</a>
            </ng-template>
        </ng-template>

    </nb-card-body>
</nb-card>

